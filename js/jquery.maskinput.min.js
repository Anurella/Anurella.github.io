!function(Z,t,j,C){var g={9:/\d/,A:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/};Z.fn.extend({maskInput:function(h,I,T){return this.length?(T=T||Z.noop,I=I||Z.noop,this.filter("input").each(function(t,e){function w(t){return-1<Z.inArray(t,_)}function L(t){var n="",a=c.slice();return Z.each(t.split(""),function(t,e){a.length&&a[0].test(e)&&(n+=e,a.shift())}),n}function U(n){var a="",i=_.slice();return Z.each(z.split(""),function(t,e){n.length&&t===i[0]?(a+=n.charAt(0)||"_",n=n.substr(1),i.shift()):a+=e}),a}var n,a,i,r,s,u=Z(e),l=u.attr("mask")||h,_=[],c=[],z="",o=0;return l===C||(l instanceof Array?Z.each(l,function(t,e){e instanceof RegExp?(_.push(o++),z+="_",c.push(e)):"string"==typeof e&&Z.each(e.split(""),function(t,e){z+=e,o++})}):Z.each(l.split(""),function(t,e){g[e]?(_.push(o),z+="_",c.push(g[e])):z+=e,o++}),_.length?(_.push(o),a=L((n=u).val()),i=U(a),r=a.length===_.length-1,s=n.attr("maxlength"),n.val(i),n.attr("value-unmasked",a),n.data("isUnmaskedValueValid",r),s&&n.attr("maxlength",parseInt(s,10)+1),u.attr("placeholder",z),u.unbind(".mask"),u.bind("blur.mask",function(t){var e=Z(this);e.data("isUnmaskedValueValid")||(e.val(""),e.attr("value-unmasked","")),e.data("caretPositionPreinput",0),e.data("selectionLengthPreinput",0)}).triggerHandler("blur"),void u.bind("input propertychange.mask keyup.mask focus.mask",function t(e){var n=e.which,a=e.type;if(16==n||91==n)return!0;var i,r,s,u=Z(this),l=u.val(),c=u.data("valuePreinput")||"",o=L(l),h=u.attr("value-unmasked")||"",g=function(t){if(t.selectionStart!==C)return t.selectionStart;if(j.selection){t.focus();var e=j.selection.createRange();return e.moveStart("character",-t.value.length),e.text.length}}(this)||0,p=u.data("caretPositionPreinput")||0,d=g-p,f=_[0],v=_[o.length]||_.slice().pop()+1,m=(s=this).selectionStart!==C?s.selectionEnd-s.selectionStart:j.selection?j.selection.createRange().text.length:void 0,k=u.data("selectionLengthPreinput")||0,y=0<m,P=0<k,b=l.length>c.length||k&&l.length>c.length-k,V=l.length<c.length||k&&l.length==c.length-k,x=37<=n&&n<=40&&e.shiftKey,A=8==n||"keyup"!=a&&V&&-1===d,S=46==n||"keyup"!=a&&V&&0===d&&!P,R=(37==n||A||"click"==a)&&f<g;if(0==I({value:L(l),maskedValue:l,lastChar:L(l).substring(L(l).length-1,L(l).length),inputElement:u}))return u.val(U(h)),!0;if(u.data("selectionLengthPreinput",m),u.unbind("mouseout.mask").one("mouseout.mask",t),"mouseout"==a||x||y&&("click"==a||"keyup"==a))return!0;if(("input"==a||"propertychange"==a)&&V&&!P&&o===h){for(;A&&0<g&&!w(g);)g--;for(;S&&g<z.length&&-1==Z.inArray(g,_);)g++;var E=Z.inArray(g,_);o=o.substring(0,E)+o.substring(E+1)}for(r=o.length===_.length-1,u.attr("value-unmasked",o),u.data("isUnmaskedValueValid",r),i=U(o),u.data("valuePreinput",i),u.val(i),b&&g<=f&&(g=f+1),R&&g--,g=v<g?v:g<f?f:g;!w(g)&&f<g&&g<v;)g+=R?-1:1;(R&&g<v||b&&!w(p))&&g++,u.data("caretPositionPreinput",g),function(t,e){if(t.setSelectionRange)t.focus(),t.setSelectionRange(e,e);else if(t.createTextRange){var n=t.createTextRange();n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",e),n.select()}}(this,g),"input"!=e.type&&T({isValid:r,value:o,maskedValue:i,inputElement:u})})):this)})):this}})}(jQuery,window,document);